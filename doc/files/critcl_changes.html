<!DOCTYPE html><html><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>critcl_changes - C Runtime In Tcl (CriTcl)</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.doctools_title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.doctools_toc,UL.doctools_toc UL, UL.doctools_toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.doctools_section, LI.doctools_subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.doctools_example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.doctools_requirements LI, UL.doctools_syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.doctools_synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.doctools_syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.doctools_requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<!-- Generated from file 'critcl_changes.man' by tcllib/doctools with format 'html'
   -->
<!-- Copyright &amp;copy; Jean-Claude Wippler   -- Copyright &amp;copy; Steve Landers   -- Copyright &amp;copy; 2011-2024 Andreas Kupries
   -->
<!-- critcl_changes.n
   -->
<body><hr> [
   <a href="../toc.html">Table Of Contents</a>
&#124; <a href="../index.html">Keyword Index</a>
 ] <hr>
<div class="doctools">
<h1 class="doctools_title">critcl_changes(n) 3.3.1 doc &quot;C Runtime In Tcl (CriTcl)&quot;</h1>
<div id="name" class="doctools_section"><h2><a name="name">Name</a></h2>
<p>critcl_changes - CriTcl Releases &amp; Changes</p>
</div>
<div id="toc" class="doctools_section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="doctools_toc">
<li class="doctools_section"><a href="#toc">Table Of Contents</a></li>
<li class="doctools_section"><a href="#section1">Description</a></li>
<li class="doctools_section"><a href="#section2">Changes for version 3.3.1</a></li>
<li class="doctools_section"><a href="#section3">Changes for version 3.3</a></li>
<li class="doctools_section"><a href="#section4">Changes for version 3.2</a></li>
<li class="doctools_section"><a href="#section5">Changes for version 3.1.18.1</a></li>
<li class="doctools_section"><a href="#section6">Changes for version 3.1.18</a></li>
<li class="doctools_section"><a href="#section7">Changes for version 3.1.17</a></li>
<li class="doctools_section"><a href="#section8">Changes for version 3.1.16</a></li>
<li class="doctools_section"><a href="#section9">Changes for version 3.1.15</a></li>
<li class="doctools_section"><a href="#section10">Changes for version 3.1.14</a></li>
<li class="doctools_section"><a href="#section11">Changes for version 3.1.13</a></li>
<li class="doctools_section"><a href="#section12">Changes for version 3.1.12</a></li>
<li class="doctools_section"><a href="#section13">Changes for version 3.1.11</a></li>
<li class="doctools_section"><a href="#section14">Changes for version 3.1.10</a></li>
<li class="doctools_section"><a href="#section15">Changes for version 3.1.9</a></li>
<li class="doctools_section"><a href="#section16">Changes for version 3.1.8</a></li>
<li class="doctools_section"><a href="#section17">Changes for version 3.1.7</a></li>
<li class="doctools_section"><a href="#section18">Changes for version 3.1.6</a></li>
<li class="doctools_section"><a href="#section19">Changes for version 3.1.5</a></li>
<li class="doctools_section"><a href="#section20">Changes for version 3.1.4</a></li>
<li class="doctools_section"><a href="#section21">Changes for version 3.1.3</a></li>
<li class="doctools_section"><a href="#section22">Changes for version 3.1.2</a></li>
<li class="doctools_section"><a href="#section23">Changes for version 3.1.1</a></li>
<li class="doctools_section"><a href="#section24">Changes for version 3.1</a></li>
<li class="doctools_section"><a href="#section25">Changes for version 3.0.7</a></li>
<li class="doctools_section"><a href="#section26">Changes for version 3.0.6</a></li>
<li class="doctools_section"><a href="#section27">Changes for version 3.0.5</a></li>
<li class="doctools_section"><a href="#section28">Changes for version 3.0.4</a></li>
<li class="doctools_section"><a href="#section29">Changes for version 3.0.3</a></li>
<li class="doctools_section"><a href="#section30">Changes for version 3.0.2</a></li>
<li class="doctools_section"><a href="#section31">Changes for version 3.0.1</a></li>
<li class="doctools_section"><a href="#section32">Changes for version 3</a></li>
<li class="doctools_section"><a href="#section33">Changes for version 2.1</a></li>
<li class="doctools_section"><a href="#section34">Authors</a></li>
<li class="doctools_section"><a href="#section35">Bugs, Ideas, Feedback</a></li>
<li class="doctools_section"><a href="#keywords">Keywords</a></li>
<li class="doctools_section"><a href="#category">Category</a></li>
<li class="doctools_section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="section1" class="doctools_section"><h2><a name="section1">Description</a></h2>
<p>Be welcome to the <i class="term">C Runtime In Tcl</i> (short: <i class="term"><a href="critcl.html">CriTcl</a></i>), a system for embedding and using C
code from within <a href="http://core.tcl-lang.org/tcl">Tcl</a> scripts.</p>
<p>Adding C code to <a href="http://core.tcl-lang.org/tcl">Tcl</a>/<a href="http://core.tcl-lang.org/tk">Tk</a> has never been easier.</p>
<p>Improve performance by rewriting the performance bottlenecks in C.</p>
<p>Import the functionality of shared libraries into Tcl scripts.
See the changes done in each release of <i class="term"><a href="critcl.html">CriTcl</a></i>, from the latest at the top to the
beginning of the project.</p>
<p>The latest changes are found at the top.</p>
</div>
<div id="section2" class="doctools_section"><h2><a name="section2">Changes for version 3.3.1</a></h2>
<ol class="doctools_enumerated">
<li><p>Oops. Added refresh of tcl 8.6, 8.7 headers which was left behind behind.</p></li>
<li><p>Oops. Fixed mismatch of package directories computed by install vs uninstall.</p></li>
</ol>
</div>
<div id="section3" class="doctools_section"><h2><a name="section3">Changes for version 3.3</a></h2>
<ol class="doctools_enumerated">
<li><p>As announced with 3.2:</p>
<ol class="doctools_enumerated">
<li><p>Removed support for Tcl 8.4 and 8.5.</p></li>
<li><p>Removed support for the argument types
       <b class="type">int*</b>,
       <b class="type">float*</b>,
       <b class="type">double*</b>,
       <b class="type">bytearray</b>,
       <b class="type">rawchar</b>, and
       <b class="type">rawchar*</b>.</p></li>
</ol>
</li>
<li><p>Modified packages to accept operation under Tcl 9.
       Bumped package versions appropriately.
       Bumped copyrights.</p>
<p>The <i class="term"><a href="critcl_tcl9.html">How To Adapt Critcl Packages for Tcl 9</a></i>
       contains the details relevant to writers of <i class="term"><a href="critcl.html">CriTcl</a></i>-based packages.</p></li>
<li><p>Set different minimum Tcl requirements for the 8.x and 9.x series.</p>
<p>If no minimum is declared the minimum depends on the Tcl version
       used to run the critcl package or application.</p>
<p>When running under Tcl 9 the default minimum is version <b class="const">9</b>.
       For anything else the new default minimum is <b class="const">8.6</b>.</p>
<p><em>Reminder</em>: Support for Tcl 8.4 and 8.5 was removed.</p></li>
<li><p>Made &quot;<b class="file">~</b>&quot;-handling portable across the 8.x and 9 boundary
       (via <b class="const">HOME</b> environment variable).</p></li>
<li><p>Bumped embedded <b class="package">tclconfig</b> to version 2.67. Patch supplied by Paul Obermeier.</p></li>
<li><p><em>Bug Fix</em> <a href="https://github.com/andreas-kupries/critcl/issues/127">#127</a></p></li>
<li><p><em>Bug Fix</em> <a href="https://github.com/andreas-kupries/critcl/issues/128">#128</a></p></li>
<li><p><em>Bug Fix</em> <a href="https://github.com/andreas-kupries/critcl/issues/129">#129</a>
Fixed various typos in the documentation.</p></li>
<li><p>Reworked internals of <b class="package"><a href="critcl_cutil.html">critcl::cutil</a></b>'s tracer to support operation in a
       multi-threaded environment. This new mode is also default. The old single-threaded
       mode can be (re)activated by defining <b class="const">CRITCL_TRACE_NOTHREADS</b>.</p>
<p>Package bumped to version 0.4.</p></li>
<li><p>Reworked the installer to add <b class="const">tclX</b> markers to the installation directories of the
       C-based support packages (<b class="package"><a href="critcl_callback.html">critcl::callback</a></b>, <b class="package">critcl::md5c</b>), where
       <b class="variable">X</b> is the major version number of the <b class="syscmd">tclsh</b> which ran critcl.</p></li>
<li><p>In other words, one of <b class="const">tcl8</b> or <b class="const">tcl9</b>.</p></li>
<li><p>Broke lingering dependencies on the Tcllib packages <b class="package">cmdline</b> and <b class="package">fileutil</b>.</p>
<p>There are no circularities between Critcl and Tcllib any longer, simplifying installation.</p></li>
</ol>
</div>
<div id="section4" class="doctools_section"><h2><a name="section4">Changes for version 3.2</a></h2>
<ol class="doctools_enumerated">
<li><p><em>BREAKING</em> <i class="term"><a href="critcl.html">CriTcl</a></i> now requires Tcl 8.6 to be run.</p>
<p>It also generates Tcl 8.6 extensions by default.</p>
<p>It is still possible to generates extensions for Tcl 8.4 and 8.5,
       properly setting it via <b class="cmd">critcl::tcl</b>.</p>
<p><em>ATTENTION</em> It is planned to completely remove 8.4 and 8.5
       support with <i class="term"><a href="critcl.html">CriTcl</a></i> 3.3.
       No date has been set for that release yet.</p>
<p>All utility packages have their versions and requirements bumped accordingly as
       well.</p></li>
<li><p><em>BREAKING</em> <em>Bug Fix</em>
       Issue <a href="https://github.com/andreas-kupries/critcl/issues/115">#115</a>.</p>
<p>Distributions using <b class="syscmd">build.tcl</b> for installation of critcl in their
       packaging scripts have to be updated to the changed command signature of
       <b class="syscmd">build.tcl</b> install, etc. See the details below.</p>
<p>Redone the argument handling for <b class="method">install</b>, <b class="method">uninstall</b>, and
       <b class="method">targets</b>. The destination argument is gone.  All commands now take options
       similar to what is known from GNU <b class="syscmd">configure</b>, i.e.</p>
<dl class="doctools_options">
<dt><b class="option">--prefix</b> path</dt>
<dd></dd>
<dt><b class="option">--exec-prefix</b> path</dt>
<dd></dd>
<dt><b class="option">--bin-dir</b> path</dt>
<dd></dd>
<dt><b class="option">--lib-dir</b> path</dt>
<dd></dd>
<dt><b class="option">--include-dir</b> path</dt>
<dd></dd>
</dl>
<p>They now also respect the environment variable <b class="variable">DESTDIR</b>, and the associated
       option <b class="option">--dest-dir</b>.</p>
<p>The <b class="option">--prefix</b> defaults to the topdir from the bin directory holding the
       <b class="syscmd">tclsh</b> running <b class="syscmd">build.tcl</b>.  As Tcl command:</p>
<pre class="doctools_example">
    file dirname [file dirname [info nameofexecutable]]
</pre>
<p>Added a command <b class="method">dirs</b> doing the same argument handling, for debugging.</p></li>
<li><p>Removed the irrelevant packages <b class="package">autoscroll</b>, <b class="package">cmdline</b>,
       <b class="package">dict84</b>, <b class="package">lassign84</b>, <b class="package">lmap84</b>, <b class="package">snit</b>,
       <b class="package">snitbutton</b>, and <b class="package">wikit</b>.</p></li>
<li><p><em>Documentation Redo</em> Issue
       <a href="https://github.com/andreas-kupries/critcl/issues/116">#116</a>.
       Reworked the documentation to use the system of 4 quadrants.
       Reworked the introduction (How To Use Critcl) to be strongly
       based on a series of examples.</p></li>
<li><p><em>Bug Fix</em> Issue
       <a href="https://github.com/andreas-kupries/critcl/issues/125">#125</a>.
       Added missing method <b class="method">create</b> in object creation example
       of installer documentation.</p></li>
<li><p><em>Feature</em>. Extended <b class="cmd">cproc</b> argument type processing. Now able to
       auto-create restricted scalar types. I.e. types derived from <i class="term">int</i>, etc. and
       limited in the range of allowed values.</p>
<p>Further able to auto-create restricted list types, i.e. types derived from
       <i class="term">list</i> and either limited in length, or in the type of the elements, or both.</p></li>
<li><p><em>Bug Fix / Enhancement</em> Issue
       <a href="https://github.com/andreas-kupries/critcl/issues/118">#118</a>.  Modified
       <b class="cmd">critcl::cproc</b> to accept C syntax for arguments, i.e.  Trailing comma on
       argument names, leading comma on type names, and lone comma characters.</p></li>
<li><p><em>Performance Fix</em> for <i class="term"><a href="../index.html#compile_run">compile &amp; run</a></i> mode.
       Issue <a href="https://github.com/andreas-kupries/critcl/issues/112">#112</a>.</p>
<p>Moved the command activating more precise code location tracking out of package
       <b class="package"><a href="critcl.html">critcl</a></b> into package <b class="package">critcl::app</b>.</p>
<p>Because generating packages ahead of time can bear the performance penalty invoked
       by this <em>global</em> setting.</p>
<p>Arbitrary libraries and applications using critcl dynamically
       (<i class="term"><a href="../index.html#compile_run">compile &amp; run</a></i>) on the other hand likely cannot, and should not.</p></li>
<li><p><em>Fix</em>
       Issue <a href="https://github.com/andreas-kupries/critcl/issues/109">#109</a>.
       Ignore <b class="syscmd">clang</b> suffices when computing the target identifier from a
       configuration identifier.</p></li>
<li><p><em>Feature</em>. Bumped package <b class="package"><a href="critcl_cutil.html">critcl::cutil</a></b> to version 0.2.1.
       Simplified the implementation of macro <b class="cmd">ASSERT</b> by taking the underlying
       <b class="function">Tcl_Panic</b>'s printf ability into account and added a new macro <b class="cmd">ASSERT_VA</b>
       exporting the same ability to the user.</p></li>
</ol>
</div>
<div id="section5" class="doctools_section"><h2><a name="section5">Changes for version 3.1.18.1</a></h2>
<ol class="doctools_enumerated">
<li><p><em>Attention</em>: While the overall version (of the bundle)
       moves to 3.1.18.1 the versions of packages <b class="package"><a href="critcl.html">critcl</a></b> and
       <b class="package">critcl::app</b> are <em>unchanged</em>.</p></li>
<li><p><em>Bugfix</em> Generally removed a number of 8.5-isms which
       slipped into 3.1.18, breaking ability to use it with Tcl 8.4.</p></li>
<li><p><em>Bugfix</em> Corrected broken <em>build.tcl uninstall</em>.</p></li>
<li><p><em>Bugfix</em> Package <b class="package"><a href="critcl_class.html">critcl::class</a></b> bumped to
       version 1.1.1. Fixed partial template substitution breaking
       compilation of the generated code.</p></li>
</ol>
</div>
<div id="section6" class="doctools_section"><h2><a name="section6">Changes for version 3.1.18</a></h2>
<ol class="doctools_enumerated">
<li><p>Feature (Developer support). Merged pull request #96 from
       sebres/main-direct-invoke. Enables direct invokation of the
       &quot;<b class="file">main.tcl</b>&quot; file for starkits from within a dev checkout,
       i.e. outside of a starkit, or starpack.</p></li>
<li><p>Feature. Added channel types to the set of builtin argument and
       result types. The argument types are for simple channel access,
       access requiring unshared channels, and taking the channel
       fully into the C level, away from Tcl. The result type comes in
       variants for newly created channels, known channels, and to
       return taken channels back to Tcl. The first will register the
       returned value in the interpreter, the second assumes that it
       already is.</p></li>
<li><p>Bugfix. Issue #96. Reworked the documentation around the
       argument type <b class="type">Tcl_Interp*</b> to make its special status
       more visible, explain uses, and call it out from result types
       where its use will be necessary or at least useful.</p></li>
<li><p>Feature. Package <b class="package"><a href="critcl_class.html">critcl::class</a></b> bumped to version 1.1.
       Extended with the ability to create a C API for classes, and
       the ability to disable the generation of the Tcl API.</p></li>
<li><p>Bugfix. Merged pull request #99 from pooryorick/master. Fixes
       to the target directory calculations done by the install code.</p></li>
<li><p>Merged pull request #94 from andreas-kupries/documentation.
       A larger documentation cleanup. The main work was done by
       pooryorick, followed by tweaks done by myself.</p></li>
<li><p>Extended the test suite with lots of cases based on the
       examples for the various generator packages. IOW the new test
       cases replicate/encapsulate the examples and demonstrate that
       the packages used by the examples generate working code.</p></li>
<li><p>Bugfix. Issue #95. Changed the field <b class="const">critcl_bytes.s</b> to
       <b class="type">unsigned char*</b> to match Tcl's type. Further constified
       the field to make clear that read-only usage is the common case
       for it.</p></li>
<li><p>Bugfix/Feature. Package <b class="package"><a href="critcl_cutil.html">critcl::cutil</a></b> bumped to
       version 0.2.  Fixed missing inclusion of header &quot;<b class="file">string.h</b>&quot;
       in &quot;<b class="file">critcl_alloc.h</b>&quot;, needed for <b class="function">memcpy</b> in macro
       <b class="function">STREP</b>.  Added macros <b class="function">ALLOC_PLUS</b> and <b class="function">STRDUP</b>.
       Moved documentation of <b class="function">STREP...</b> macros into proper place
       (alloc section, not assert).</p></li>
<li><p>Merged pull request #83 from apnadkarni/vc-fixes.
       Removed deprecated -Gs for MSVC builds, and other Windows fixups.</p></li>
<li><p>Feature. Package <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b> bumped to version 1.1.
       Refactored internals to generate an include header for use by .c files.
       This now matches what other generator packages do.
       The template file is inlined and removed.</p></li>
<li><p>Merged pull request #82 from gahr/home-symlink
       Modified tests to handle possibility of $HOME a symlink.</p></li>
<li><p>Merged pull request #81 from gahr/test-not-installed
       Modified test support to find uninstalled critcl packages when
       running tests. Handles all but critcl::md5.</p></li>
<li><p>Merged pull request #85 from snoe925/issue-84
       to fix Issue #84 breaking installation on OSX.</p></li>
<li><p>Merged pull request #87 from apnadkarni/tea-fixes to fix Issue
       #86, broken -tea option, generating an incomplete package.</p></li>
<li><p>Feature. New package <b class="package"><a href="critcl_callback.html">critcl::callback</a></b> providing
       C-level functions and data structures to manage callbacks from
       C to Tcl.</p></li>
<li><p>Feature. Package <b class="package"><a href="critcl_literals.html">critcl::literals</a></b> bumped to version
       1.3.  Added mode <b class="const">+list</b> enabling the conversion of
       multiple literals into a list of their strings.</p></li>
<li><p>Feature. Package <b class="package"><a href="critcl_enum.html">critcl::enum</a></b> bumped to version 1.1.
       Added basic mode handling, supporting <b class="const">tcl</b> (default) and
       <b class="const">+list</b> (extension enabling the conversion of multiple
       enum values into a list of their strings).</p></li>
<li><p>Feature. Package <b class="package"><a href="critcl_emap.html">critcl::emap</a></b> bumped to version 1.2.
       Extended existing mode handling with <b class="const">+list</b> extension
       enabling the conversion of multiple emap values into a list of
       their strings.</p></li>
<li><p>Feature. Extended the set of available types by applying a few
       range restrictions to the scalar types (<i class="term">int</i>,
       <i class="term">long</i>, <i class="term">wideint</i>, <i class="term">double</i>, <i class="term">float</i>).</p>
<p>Example: <i class="term">int &gt; 0</i> is now a viable type name.</p>
<p>This is actually more limited than the description might
       let you believe.</p>
<p>See the package reference for the details.</p></li>
</ol>
</div>
<div id="section7" class="doctools_section"><h2><a name="section7">Changes for version 3.1.17</a></h2>
<ol class="doctools_enumerated">
<li><p>Extension: Allow duplicate arg- and result-type definitions if
       they are fully identical.</p></li>
<li><p>Bugfix. The application mishandled the possibility of
       identical-named <b class="cmd">critcl::tsource</b>s. Possible because
       <b class="cmd">critcl::tsource</b>s can be in subdirectories, a structure
       which is <em>not</em> retained in the assembled package, causing
       such files to overwrite each other and at least one lost. Fixed
       by adding a serial number to the file names in the assembled
       package.</p></li>
<li><p>Bugfix in the static scanner which made it loose requirement
       information. Further added code to generally cleanup results at
       the end (removal of duplicates, mainly).</p></li>
<li><p>Bugfix: Fixed issue #76.
       Support installation directories which are not in the <b class="variable">auto_path</b>.
       Without the patch the installed <b class="cmd"><a href="critcl.html">critcl</a></b> will not find its
       own packages and fail. Thank you to
       <a href="https://github.com/lupylucke">Simon Bachmann</a> for the
       report and patch, and then his patience with me to getting to
       actually apply it.</p></li>
<li><p>Bugfix: Fixed issue #75.
       Extended <b class="cmd">critcl::include</b> to now take multiple paths.</p></li>
<li><p>Added new compatibility package <b class="package">lmap84</b>.</p></li>
<li><p>Fixed typos in various documentation files.</p></li>
<li><p>Fixed bug introduced by commit 86f415dd30 (3.1.16 release). The
       separation of <b class="cmd">critcl::ccode</b> into user and work layers
       means that location retrieval has to go one more level up to
       find the user location.</p></li>
<li><p>New supporting package <b class="package"><a href="critcl_cutil.html">critcl::cutil</a></b>. Provides common
       C level facilities useful to packages (assertions, tracing,
       memory allocation shorthands).</p></li>
<li><p>Modified package <b class="package"><a href="critcl.html">critcl</a></b> to make use of the new
       tracing facilities to provide tracing of arguments and results
       for <b class="cmd">critcl::ccommand</b> and <b class="cmd">critcl::cproc</b> invokations.</p></li>
<li><p>Modified packages <b class="package"><a href="critcl.html">critcl</a></b> and <b class="package"><a href="critcl_class.html">critcl::class</a></b>
       to provide better function names for (class) method tracing.
       Bumped package <b class="package"><a href="critcl_class.html">critcl::class</a></b> to version 1.0.7.</p></li>
<li><p>Extended the support package <b class="package"><a href="critcl_literals.html">critcl::literals</a></b> with
       limited configurability. It is now able to generate code for
       C-level access to the pool without Tcl types (Mode <b class="const">c</b>).
       The previously existing functionality is accesssible under mode
       <b class="const">tcl</b>, which also is the default. Both modes can be used
       together.</p></li>
<li><p>Extended the support package <b class="package"><a href="critcl_emap.html">critcl::emap</a></b> with
       limited configurability. It is now able to generate code for
       C-level access to the mapping without Tcl types
       (Mode <b class="const">c</b>). The previously existing functionality is
       accessible under mode <b class="const">tcl</b>, which also is the
       default. Both modes can be used together.</p></li>
</ol>
</div>
<div id="section8" class="doctools_section"><h2><a name="section8">Changes for version 3.1.16</a></h2>
<ol class="doctools_enumerated">
<li><p>New feature. Extended <b class="cmd">critcl::cproc</b>'s argument handling
       to allow arbitrary mixing of required and optional arguments.</p></li>
<li><p>New feature.
       <em>Potential Incompatibility</em>.</p>
<p>Extended <b class="cmd">critcl::cproc</b>'s argument handling to treat an
       argument <b class="const">args</b> as variadic if it is the last argument of
       the procedure.</p></li>
<li><p>New feature. Added two introspection commands,
       <b class="cmd">critcl::has-argtype</b> and <b class="cmd">critcl::has-resulttype</b>.
       These enable a user to test if a specific (named) type
       conversion is implemented or not.</p></li>
<li><p>Added new result type <b class="const">Tcl_Obj*0</b>, with alias
       <b class="const">object0</b>. The difference to <b class="const">Tcl_Obj*</b> is in
       the reference counting.</p></li>
<li><p>Extended the command <b class="cmd">critcl::argtypesupport</b> with new
       optional argument through which to explicitly specify the
       identifier for guarding against multiple definitions.</p></li>
<li><p>Bugfix: Fixed problem with the implementation of issue #54 (See
       3.1.14). Always create the secondary log file. Otherwise
       end-of-log handling may break, unconditionally assuming its
       existence.</p></li>
<li><p>Bugfix: Fixed problem with the internal change to the hook
       <b class="const">HandleDeclAfterBuild</b>. Corrected the forgotten
       <b class="cmd">critcl::cconst</b>.</p></li>
<li><p>Debugging aid: Added comment holding the name of the result
       type when emitting result conversions.</p></li>
<li><p>Bugfix: Fixed issue #60. Unbundled the package directories
       containing multiple packages. All directories under &quot;<b class="file">lib/</b>&quot;
       now contain exactly one package.</p></li>
<li><p>Bugfix: Fixed issue #62, a few <b class="cmd">dict exists</b> commands
       operating on a fixed string instead of a variable.</p></li>
<li><p>Bugfix: Fixed issue #56. Release builders are reminded to run
       the tests.</p></li>
<li><p>Bugfix: Fixed issue #55. For FreeBSD critcl's platform package
       now identifies the Kernel ABI version. Initialization of the
       cache directory now also uses <b class="cmd">platform::identify</b> for the
       default path, instead of <b class="cmd">platform::generic</b>.</p></li>
<li><p>Bugfix: Fixed issue #58. Simplified the setup and use of
       md5. CriTcl now makes use of its own package for md5, using
       itself to built it. There is no chicken/egg problem with this
       as the <b class="option">-pkg</b> mode used for this does not use md5. That
       is limited to mode <i class="term"><a href="../index.html#compile_run">compile &amp; run</a></i>.</p></li>
</ol>
</div>
<div id="section9" class="doctools_section"><h2><a name="section9">Changes for version 3.1.15</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed version number bogosity with <b class="const">3.1.14</b>.</p></li>
</ol>
</div>
<div id="section10" class="doctools_section"><h2><a name="section10">Changes for version 3.1.14</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #36. Added message to target <b class="const">all</b> of the
        Makefile generated for TEA mode. Additionally tweaked other
        parts of the output to be less noisy.</p></li>
<li><p>Accepted request implied in issue #54. Unconditionally save
        the compiler/linker build log into key <b class="const">log</b> of the
        dictionary returned by <b class="cmd">cresults</b>, and save a copy of only
        the execution output in the new key <b class="const">exl</b> (&quot;execution
        log&quot;).</p></li>
<li><p>Fixed issue #53. Clarified the documentation of commands
        <b class="cmd">critcl::load</b> and <b class="cmd">critcl::failed</b> with regard
        to their results and the throwing of errors (does not happen).</p></li>
<li><p>Fixed issue #48. Modified mode &quot;compile &amp; run&quot; to allow new
        declarations in a file, after it was build, instead of
        erroring out. The new decls are build when needed. Mode
        &quot;precompile&quot; is unchanged and will continue to trap the
        situation.</p></li>
<li><p>Fixed issue #52. Updated the local Tcl/Tk headers to
        8.4.20, 8.5.13, and 8.6.4.</p></li>
<li><p>Fixed issue #45. New feature command <b class="cmd">critcl::cconst</b>.</p></li>
<li><p><b class="package"><a href="critcl_util.html">critcl::util</a></b>: New command <b class="cmd">locate</b> to find a
        file across a set of paths, and report an error when not
        found. This is for use in autoconf-like header-searches and
        similar configuration tests.</p></li>
<li><p>Modified 'AbortWhenCalledAfterBuild' to dump the entire stack
        (info frame!). This should make it easier to determine the
        location of the troubling declaration.</p></li>
</ol>
</div>
<div id="section11" class="doctools_section"><h2><a name="section11">Changes for version 3.1.13</a></h2>
<ol class="doctools_enumerated">
<li><p>Merged PR #43. Fixed bug loading adjunct Tcl sources.</p></li>
<li><p>Fixes in documentation and generated code of package
	&quot;critcl::enum&quot;. Bumped to version 1.0.1.</p></li>
<li><p>Fixes in documentation of package &quot;critcl::bitmap&quot;.</p></li>
<li><p>New package &quot;critcl::emap&quot;. In essence a variant or cross of
	&quot;critcl::bitmap&quot; with behaviour like &quot;critcl::enum&quot;.</p></li>
<li><p>Merged PR #49. Fixed documentation typo.</p></li>
<li><p>Merged PR #46. Fixed documentation typo.</p></li>
<li><p>Merged PR #47. Fixes to test results to match the accumulated
	code changes. Also made portable across Tcl versions (varying
	error syntax).</p></li>
<li><p>New predefined argument- and result-type &quot;wideint&quot; mapping to
	Tcl_WideInt.</p></li>
<li><p>New predefined argument-type &quot;bytes&quot; mapping to tuple of
	byte-array data and length. Note: The existing &quot;bytearray&quot;
	type (and its aliases) was left untouched, to keep backward
	compatibility.</p></li>
<li><p>Modified the internal interface between the Tcl shim and C
	function underneath &quot;critcl::cproc&quot; with respect to the
	handling of optional arguments.
	An optional argument &quot;X&quot; now induces the use of two C
    	arguments, &quot;X&quot; and &quot;has_X&quot;.  The new argument &quot;has_X&quot; is of
    	boolean (int) type. It is set to true when X is set, and set
    	to false when X has the default value. C code which cares
    	about knowing if the argument is default or not is now able to
    	check that quickly, without having to code the default value
    	inside.
	NOTE: This change is visible in the output of the advanced
    	      commands &quot;argcnames&quot;, &quot;argcsignature&quot;, &quot;argvardecls&quot;,
    	      and &quot;argconversion&quot;.</p></li>
<li><p>Fixed issue #50 and documented the availability of variable
	&quot;interp&quot; (type Tcl_Interp*) within &quot;critcl::cinit&quot; C code
	fragments.
	Note that while the old, undocumented name of the variable,
	&quot;ip&quot;, is still usable, it is deprecated. It will be fully
	removed in two releases, i.e. for release 3.1.15.
	The variable name was changed to be consistent with other code
	environments.</p></li>
<li><p>Fixed issue #51. Disabled the generation of #line directives
	for &quot;critcl::config lines 0&quot; coming from template files, or
	code generated with them before the final value of this
	setting was known.</p></li>
<li><p>Fixed issue with handling of namespaced package names in
	&quot;critcl::iassoc&quot;. Equivalent to a bug in &quot;critcl::class&quot; fixed
	for critcl 3.1.1, critcl::class 1.0.1.
	Note: &quot;literals&quot;, &quot;enum&quot;, &quot;emap&quot;, and &quot;bitmap&quot; do not require
	a fix as they are all built on top of &quot;iassoc&quot;.</p></li>
</ol>
</div>
<div id="section12" class="doctools_section"><h2><a name="section12">Changes for version 3.1.12</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue 42. Clear ::errorInfo immediately after startup to
       prevent leakage of irrelevant (caught) errors into our script
       and confusing the usage code.</p></li>
<li><p>Fixed issue 40. Keep the order of libraries, and allow
       duplicates. Both are things which are occasionally required for
       proper linking.</p></li>
<li><p>Extended the utility package <b class="package"><a href="critcl_literals.html">critcl::literals</a></b> to
       declare a cproc result-type for a pool.</p>
<p>Further fixed the generated header to handle multiple inclusion.</p>
<p>Bumped version to 1.1.</p></li>
<li><p>Fixed issue with utility package <b class="package"><a href="critcl_bitmap.html">critcl::bitmap</a></b>.</p>
<p>Fixed the generated header to handle multiple inclusion.</p>
<p>Bumped version to 1.0.1.</p></li>
<li><p>Created new utility package <b class="package"><a href="critcl_enum.html">critcl::enum</a></b> for the
       quick and easy setup and use of mappings between C values
       and Tcl strings.
       Built on top of <b class="package"><a href="critcl_literals.html">critcl::literals</a></b>.</p></li>
<li><p>Added examples demonstrating the use of the utility packages
	<b class="package"><a href="critcl_literals.html">critcl::literals</a></b>,
	<b class="package"><a href="critcl_bitmap.html">critcl::bitmap</a></b>, and
	<b class="package"><a href="critcl_enum.html">critcl::enum</a></b></p></li>
</ol>
</div>
<div id="section13" class="doctools_section"><h2><a name="section13">Changes for version 3.1.11</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #37, via pull request #38, with thanks to
       Jos DeCoster. Information was stored into the v::delproc
       and v::clientdata arrays using a different key than when
       retrieving the same information, thus failing the latter.</p></li>
<li><p>New convenience command <b class="cmd">critcl::include</b> for easy
       inclusion of headers and other C files.</p></li>
<li><p>New command <b class="cmd">critcl::make</b> to generate a local header of
       other C files for use by other parts of a package through
       inclusion.</p></li>
<li><p>New utility package <b class="package"><a href="critcl_literals.html">critcl::literals</a></b> for quick and
       easy setup of and access to pools of fixed Tcl_Obj* strings.
       Built on top of <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b>.</p></li>
<li><p>New utility package <b class="package"><a href="critcl_bitmap.html">critcl::bitmap</a></b> for quick and easy
       setup and use of mappings between C bitsets and Tcl lists whose
       string elements represent that set.
       Built on top of <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b>.</p></li>
</ol>
</div>
<div id="section14" class="doctools_section"><h2><a name="section14">Changes for version 3.1.10</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed code version numbering forgotten with 3.1.9.</p></li>
<li><p>Fixed issue #35. In package mode (-pkg) the object cache
	directory is unique to the process, thus we do not need
	content-hashing to generate unique file names. A simple
	counter is sufficient and much faster.</p>
<p>Note that mode &quot;compile &amp; run&quot; is not as blessed and still
	uses content-hasing with md5 to ensure unique file names
	in its per-user object cache.</p></li>
<li><p>Fixed issue where the <b class="cmd">ccommand</b> forgot to use its body as
	input for the UUID generation. Thus ignoring changes to it in
	mode compile &amp; run, and not rebuilding a library for changed
	sources. Bug and fix reported by Peter Spjuth.</p></li>
</ol>
</div>
<div id="section15" class="doctools_section"><h2><a name="section15">Changes for version 3.1.9</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #27. Added missing platform definitions for
	various alternate linux and OS X targets.</p></li>
<li><p>Fixed issue #28. Added missing -mXX flags for linking at the
	linux-{32,64}-* targets.</p></li>
<li><p>Fixed issue #29. Replaced the use of raw &quot;cheaders&quot;
	information in the processing of &quot;cdefines&quot; with the proper
	include directives derived from it.</p></li>
<li><p>Fixed the issue behind rejected pull request #30 by Andrew
	Shadura. Dynamically extract the stubs variable declarations
	from the Tcl header files and generate matching variable
	definitions for use in the package code. The generated code
	will now be always consistent with the headers, even when
	critcl's own copy of them is replaced by system headers.</p></li>
<li><p>Fixed issue #31. Accepted patch by Andrew Shadura, with
	changes (comments), for easier integration of critcl with
	OS package systems, replacing critcl's copies of Tcl headers
	with their own.</p></li>
<li><p>Fixed issue #32. Merged pull request by Andrew Shadura.
	Various typos in documentation and comments.</p></li>
<li><p>Fixed issue #34. Handle files starting with a dot better.</p></li>
</ol>
</div>
<div id="section16" class="doctools_section"><h2><a name="section16">Changes for version 3.1.8</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue with package indices generated for Tcl 8.4.
	Join the list of commands with semi-colon, not newline.</p></li>
<li><p>Fixed issue #26 which brought up use-cases I had forgotten to
	consider while fixing bug #21 (see critcl 3.1.6).</p></li>
</ol>
</div>
<div id="section17" class="doctools_section"><h2><a name="section17">Changes for version 3.1.7</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #24. Extract and unconditionally display compiler
	warnings found in the build log. Prevents users from missing
	warnings which, while not causing the build to fail, may
	still indicate problems.</p></li>
<li><p>New feature. Output hook. All non-messaging user output is now
	routed through the command <b class="cmd">critcl::print</b>, and users are
	allowed to override it when using the critcl application-as-package.</p></li>
<li><p>New feature, by Ashok P. Nadkarni. Platform configurations can
	inherit values from configurations defined before them.</p></li>
</ol>
</div>
<div id="section18" class="doctools_section"><h2><a name="section18">Changes for version 3.1.6</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #21. While the multi-definition of the stub-table
       pointer variables was ok with for all the C linkers seen so far
       C++ linkers did not like this at all. Reworked the code to
       ensure that this set of variables is generated only once, in
       the wrapper around all the pieces to assemble.</p></li>
<li><p>Fixed issue #22, the handling of the command identifier
       arguments of <b class="cmd">critcl::ccommand</b>, <b class="cmd">critcl::cproc</b>, and
       <b class="cmd">critcl::cdata</b>. We now properly allow any Tcl identifier
       and generate proper internal C identifiers from them.</p>
<p>As part of this the signature of command <b class="cmd">critcl::name2c</b>
       changed. The command now delivers a list of four values instead
       of three. The new value was added at the end.</p>
<p>Further adapted the implementation of package
       <b class="package"><a href="critcl_class.html">critcl::class</a></b>, a user of <b class="cmd">critcl::name2c</b>.
       This package is now at version 1.0.6 and requires critcl 3.1.6</p>
<p>Lastly fixed the mis-handling of option <b class="option">-cname</b> in
       <b class="cmd">critcl::ccommand</b>, and <b class="cmd">critcl::cproc</b>.</p></li>
<li><p>Fixed issue #23.</p></li>
</ol>
</div>
<div id="section19" class="doctools_section"><h2><a name="section19">Changes for version 3.1.5</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue #19. Made the regular expression extracting the
       MSVC version number more general to make it work on german
       language systems. This may have to be revisited in the future,
       for other Windows locales.</p></li>
<li><p>Fixed issue #20. Made option -tea work on windows, at least in
       a unix emulation environment like msys/mingw.</p></li>
</ol>
</div>
<div id="section20" class="doctools_section"><h2><a name="section20">Changes for version 3.1.4</a></h2>
<ol class="doctools_enumerated">
<li><p>Bugfix in package <b class="package"><a href="critcl_class.html">critcl::class</a></b>. Generate a dummy
       field in the class structure if the class has no class
       variables. Without this change the structure would be empty,
       and a number of compilers are not able to handle such a type.</p></li>
<li><p>Fixed a typo which broke the win64 configuration.</p></li>
<li><p>Fixed issue #16, a typo in the documentation of command
       <b class="cmd"><a href="critcl_class.html">critcl::class</a></b>.</p></li>
</ol>
</div>
<div id="section21" class="doctools_section"><h2><a name="section21">Changes for version 3.1.3</a></h2>
<ol class="doctools_enumerated">
<li><p>Enhancement. In detail:</p></li>
<li><p>Added new argument type &quot;pstring&quot;, for &quot;Pascal String&quot;, a
       counted string, i.e. a combination of string pointer and string
       length.</p></li>
<li><p>Added new methods <b class="cmd">critcl::argtypesupport</b> and
       <b class="cmd">::critcl::argsupport</b> to define and use additional
       supporting code for an argument type, here used by &quot;pstring&quot;
       above to define the necessary structure.</p></li>
<li><p>Semi-bugfixes in the packages <b class="package"><a href="critcl_class.html">critcl::class</a></b> and
       <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b>. Pragmas for the AS meta data scanner
       to ensure that the template files are made part of the package.
       Versions bumped to 1.0.4 and 1.0.1 respectively.</p></li>
</ol>
</div>
<div id="section22" class="doctools_section"><h2><a name="section22">Changes for version 3.1.2</a></h2>
<ol class="doctools_enumerated">
<li><p>Enhancement. In detail:</p></li>
<li><p>Extended <b class="cmd">critcl::cproc</b> to be able to handle optional
       arguments, in a limited way. This is automatically available to
       <b class="package"><a href="critcl_class.html">critcl::class</a></b> cproc-based methods as well.</p></li>
<li><p>Bugfix in <b class="cmd">lassign</b> emulation for Tcl 8.4.  Properly set
       unused variables to the empty string.  Bumped version of
       emulation package <b class="package">lassign84</b> to 1.0.1.</p></li>
</ol>
</div>
<div id="section23" class="doctools_section"><h2><a name="section23">Changes for version 3.1.1</a></h2>
<ol class="doctools_enumerated">
<li><p>Bugfixes all around. In detail:</p></li>
<li><p>Fixed the generation of wrong#args errors for
<b class="cmd">critcl::cproc</b> and derived code (<b class="package"><a href="critcl_class.html">critcl::class</a></b>
cproc-based methods). Use NULL if there are no arguments, and
take the offset into account.</p></li>
<li><p>Fixed the handling of package names by
<b class="package"><a href="critcl_class.html">critcl::class</a></b>. Forgot that they may contain namespace
separators. Bumped to version 1.0.1.</p></li>
<li><p>Extended a <b class="package"><a href="critcl_class.html">critcl::class</a></b> generated error message in
instance creation for clarity. Bumped to version 1.0.2.</p></li>
</ol>
</div>
<div id="section24" class="doctools_section"><h2><a name="section24">Changes for version 3.1</a></h2>
<ol class="doctools_enumerated">
<li><p>Added a new higher-level package <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b>.</p>
<p>This package simplifies the creation of code associating data
with an interpreter via Tcl's <b class="function">Tcl_(Get|Set)AssocData()</b> APIs. The
user can concentrate on his data while all the necessary boilerplate
C code to support this is generated by the package.</p>
<p>This package uses several of the new features which were added
to the core <b class="package"><a href="critcl.html">critcl</a></b> package, see below.</p></li>
<li><p>Added the higher-level package <b class="package"><a href="critcl_class.html">critcl::class</a></b>.</p>
<p>This package simplifies the creation of C level objects with
class and instance commands. The user can write a class definition
with class- and instance-variables and -methods similar to a TclOO
class, with all the necessary boilerplate C code to support this
generated by the package.</p>
<p>This package uses several of the new features which were added
to the core <b class="package"><a href="critcl.html">critcl</a></b> package, see below.</p></li>
<li><p>Extended the API for handling TEApot metadata. Added the
command <b class="cmd">critcl::meta?</b> to query the stored information. Main use
currently envisioned is retrieval of the current package's name by
utility commands, for use in constructed names. This particular
information is always available due to the static scan of the package
file on execution of the first critcl command.</p>
<p>The new packages <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b> and
<b class="package"><a href="critcl_class.html">critcl::class</a></b> (see above) are users of this command.</p></li>
<li><p>Extended the API with a command, <b class="cmd">critcl::name2c</b>, exposing
the process of converting a Tcl name into base name, namespace, and C
namespace. This enables higher-level code generators to generate the same
type of C identifiers as <b class="package"><a href="critcl.html">critcl</a></b> itself.</p>
<p>The new package <b class="package"><a href="critcl_class.html">critcl::class</a></b> (see above) is a user
of this command.</p></li>
<li><p>Extended the API with a command, <b class="cmd">critcl::source</b>,
executing critcl commands found in a separate file in the context of
the current file. This enables easier management of larger bodies of
code as it allows the user to split such up into easier to digest
smaller chunks without causing the generation of multiple packages.</p></li>
<li><p>Related to the previous item, extended the API with commands to
divert collection of generated C code into memory. This makes it
easier to use the commands for embedded C code in higher-level code
generators.</p>
<p>See the section <b class="sectref">Advanced: Diversions</b> for details of
the provided commands.</p>
<p>The new package <b class="package"><a href="critcl_class.html">critcl::class</a></b> (see above) is a user
of these facilities.</p></li>
<li><p>Extended the API with commands helping developers with the
generation of proper C <i class="term">#line</i> directives. This allows
higher-level code generators to generate and insert their own
directives, ensuring that compile errors in their code are properly
attributed.</p>
<p>See the section <b class="sectref">Advanced: Location management</b> for
details of the provided commands.</p>
<p>The new packages <b class="package"><a href="critcl_iassoc.html">critcl::iassoc</a></b> and
<b class="package"><a href="critcl_class.html">critcl::class</a></b> (see above) are users of these facilities.</p></li>
<li><p>Extended the API with commands giving users the ability to
define custom argument and result types for <b class="cmd">::critcl::cproc</b>.</p>
<p>See the section <b class="sectref">CriTcl cproc Type Reference</b> for
details of the provided commands.</p></li>
</ol>
</div>
<div id="section25" class="doctools_section"><h2><a name="section25">Changes for version 3.0.7</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed the code generated by <b class="cmd">critcl::c++command</b>.
        The emitted code handed a non-static string table to
	<b class="function">Tcl_GetIndexFromObj</b>, in violation of the contract, which
	requires the table to have a fixed address. This was a memory
	smash waiting to happen. Thanks to Brian Griffin for alrerting
	us to the general problem.</p></li>
</ol>
</div>
<div id="section26" class="doctools_section"><h2><a name="section26">Changes for version 3.0.6</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed github issue 10. The critcl application now delivers a
	proper exit code (1) on build failure, instead of always
	indicating success (status 0).</p></li>
<li><p>Fixed github issue 13. Handling of bufferoverflowU.lib for
	release builds was inconsistent with handling for debug
	builds. It is now identically handled (conditional) by
	both cases.</p></li>
<li><p>Documentation cleanup, mainly in the installation guide, and
	the README.md shown by github</p></li>
</ol>
</div>
<div id="section27" class="doctools_section"><h2><a name="section27">Changes for version 3.0.5</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed bug in the new code for #line pragmas triggered when
	specifying C code without leading whitespace.</p></li>
<li><p>Extended the documentation to have manpages for the license,
	source retrieval, installer, and developer's guides.</p></li>
</ol>
</div>
<div id="section28" class="doctools_section"><h2><a name="section28">Changes for version 3.0.4</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed generation of the package's initname when the incoming
	code is read from stdin and has no proper path.</p></li>
<li><p>Fixed github issue 11. Now using /LIBPATH instead of -L
	on Windows (libinclude configuration setting).</p></li>
<li><p>Extended critcl to handle -l:path format of -l options.
	GNU ld 2.22+ handles this by searching for the path as
	is. Good when specifying static libraries, as plain -l looks
	for shared libraries in preference over static. critcl handles
	it now, as older GNU ld's do not understand it, nor the
	various vendor-specific linkers.</p></li>
<li><p>Fixed github issue #12. CriTcl now determines the version of
	MSVC in use and uses it to switch between various link debug
	options. Simplified the handling of bufferoverflowU.lib also,
	making use of the same mechanism and collapsing the two
	configurations sections we had back into one.</p></li>
<li><p>Reworked the insertion of #line pragmas into the generated C
	code to avoid limitations on the line number argument imposed
	by various compilers, and be more accurate.</p></li>
<li><p>Modified argument processing. Option -libdir now also
	implies -L for its argument.</p></li>
<li><p>Extended handling of option -show (<b class="cmd">critcl::showconfig</b>)
	to list the path of the configuration file the data is coming
	from. Good for debugging configuration processing.</p></li>
<li><p>Extended the build script with targets to regenerate the
	embedded documentation, and diagrams, and to generate a
	release.</p></li>
</ol>
</div>
<div id="section29" class="doctools_section"><h2><a name="section29">Changes for version 3.0.3</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed github issues 5 and 8, for the example build.tcl
scripts. Working around a missing variable ::errorInfo. It should
always be present, however there seem to be revisions of Tcl around
which violate this assumption.</p></li>
</ol>
</div>
<div id="section30" class="doctools_section"><h2><a name="section30">Changes for version 3.0.2</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed issue in compile-and-run mode where commands put into the
auto_index are not found by Tcl's [unknown] command.</p></li>
<li><p>Fixed an array key mismatch breaking usage of client data and
delete function for procedure. Reported by Jos DeCoster, with patch.</p></li>
<li><p>Implemented a command line option <b class="option">-L</b>, an equivalent of
option <b class="option">-I</b>, just for library search paths.</p></li>
<li><p>Fixed github issues 5 and 8. Working around a missing variable
::errorInfo. It should always be present, however there seem to be
revisions of Tcl around which violate this assumption.</p></li>
</ol>
</div>
<div id="section31" class="doctools_section"><h2><a name="section31">Changes for version 3.0.1</a></h2>
<ol class="doctools_enumerated">
<li><p>Bugfixes all around. In detail:</p></li>
<li><p>Fixed recording of Tcl version requirements. Keep package name
and version together, unbreaking generated meta data and generated
package load command.</p></li>
<li><p>Fixed the build scripts: When installing, or wrapping for TEA,
generate any missing directories</p></li>
<li><p>Modified the build scripts to properly exit the application
when the window of their GUI is closed through the (X) button.</p></li>
<li><p>Removed an 8.5-ism (open wb) which had slipped into the main
build script.</p></li>
<li><p>Modified the example build scripts to separate the output for
the different examples (and packages) by adding empty lines.</p></li>
<li><p>stack::c example bugfix: Include API declarations for use in
the companion files.</p></li>
<li><p>Extended the documentation: Noted the need for a working
installation of a C compiler.</p></li>
<li><p>Extended the Windows target definitions and code to handle the
manifest files used by modern MS development environments. Note that
this code handles both possibilities, environment using manifests, and
(old(er)) environments without.</p></li>
<li><p>Extended the Windows 64bit target definitions and code to
auto-detect the need for the helper library &quot;bufferoverflowU.lib&quot; and
reconfigure the compile and link commands appropriately. We assume
that the library must be linked when present. This should be no harm
if the library is present, yet not needed. Just superfluous. We search
for the library in the paths specified by the environment variable
LIB.</p></li>
</ol>
</div>
<div id="section32" class="doctools_section"><h2><a name="section32">Changes for version 3</a></h2>
<ol class="doctools_enumerated">
<li><p>The command <b class="cmd">critcl::platform</b> was deprecated in version
2.1, superceded by <b class="cmd">critcl::targetplatform</b>, yet kept for
compatibility. Now it has been removed.</p></li>
<li><p>The command <b class="cmd">critcl::compiled</b> was kept with in version 2.1
with semantics in contradiction to its, for compatibility. This
contradiction has been removed, changing the visible semantics of the
command to be in line with its name.</p></li>
<li><p>The change to version 3 became necessary because of the two
incompatible visible changes above.</p></li>
<li><p>Extended the application package with code handling a new
option <b class="option">-tea</b>. Specifying this option invokes a special mode
where critcl generates a TEA package, i.e. wraps the input into a
directory hierarchy and support files which provide it TEA-lookalike
buildsystem.</p>
<p>This new option, and <b class="option">-pkg</b>, exclude each other. If
both are specified the last used option takes precedence.</p>
<p>The generated package directory hierarchy is mostly
self-contained, but not fully. It requires not only a working
installation of Tcl, but also working installations of the packages
<b class="package">md5</b> and <b class="package">cmdline</b>. Both of these are provided by the
<b class="package">Tcllib</b> bundle. Not required, but recommended to have
installed are any of the packages which can accelerate md5's
operation, i.e. <b class="package">cryptkit</b>, <b class="package">tcllibc</b>, or
<b class="package">Trf</b>.</p></li>
<li><p>Extended the critcl package with a new command
<b class="cmd">critcl::scan</b> taking the path to a &quot;<b class="file">.critcl</b>&quot; file,
statically scanning it, and returning license, version, a list of its
companion files, list of imported APIs, and list of
developer-specified custom configuration options. This data is the
foundation for the TEA wrapping described above.</p>
<p>Note that this is a <em>static</em> scan. While the other build
modes can (must) execute the &quot;<b class="file">.critcl</b>&quot; file and make
platform-specific decisions regarding the assembled C code, companion
files, etc. the TEA wrap mode is not in a position to make
platform-specific decisions. It has to wrap everything which might
conceivably be needed when actually building. Hence the static scan.
This has however its own set of problems, namely the inability to
figure out any dynamic construction of companion file paths, at least
on its own. Thus:</p></li>
<li><p>Extended the API used by critcl-based packages with the command
<b class="cmd">critcl::owns</b>. While this command is ignored by the regular build
modes the static scanner described above takes its arguments as the
names of companion files which have to be wrapped into the TEA package
and could not be figured by the scanner otherwise, like because of
dynamic paths to <b class="cmd">critcl::tsources</b>, <b class="cmd">critcl::csources</b>,
getting sourced directly, or simply being adjunct datafiles.</p></li>
<li><p>Extended the API used by critcl-based packages with the command
<b class="cmd">critcl::api</b> for the management of stubs tables, be it their use,
and/or declaration and export.</p>
<p>Please see section <em>Stubs Table Management</em> of the
<b class="package"><a href="critcl.html">critcl</a></b> package documentation for details.</p></li>
<li><p>Extended the API used by critcl-based packages with the command
<b class="cmd">critcl::userconfig</b> for the management of developer-specified
custom configuration options, be it their use and/or declaration.</p>
<p>Please see section <em>Custom Build Configuration</em> of the
<b class="package"><a href="critcl.html">critcl</a></b> package documentation for details.</p></li>
<li><p>Extended the API used by critcl-based packages with the
commands <b class="cmd">critcl::description</b>, <b class="cmd">critcl::summary</b>,
<b class="cmd">critcl::subject</b>, <b class="cmd">critcl::meta</b>, and
<b class="cmd">critcl::buildrequirement</b> for the declaration of TEApot meta data
for/about the package.</p>
<p>Please see section <em>Package Meta Data</em> of the
<b class="package"><a href="critcl.html">critcl</a></b> package documentation for details.</p></li>
</ol>
</div>
<div id="section33" class="doctools_section"><h2><a name="section33">Changes for version 2.1</a></h2>
<ol class="doctools_enumerated">
<li><p>Fixed bug where <b class="cmd">critcl::tsources</b> interpreted relative
paths as relative to the current working directory instead of
relative to the &quot;<b class="file">.critcl</b>&quot; file using the command, as all other
commands of this type do.</p></li>
<li><p>Fixed internals, preventing information collected for multiple
&quot;<b class="file">.critcl</b>&quot; files to leak between them. Notably, <b class="cmd">critcl::tk</b>
is not a global configuration option anymore.</p></li>
<li><p>Fixed the command <b class="cmd">critcl::license</b> to be a null-operation
in mode &quot;compile &amp; run&quot;, instead of throwing an error.</p></li>
<li><p>Fixed the critcl application's interference with the &quot;compile &amp;
run&quot; result cache in <b class="option">-pkg</b> mode by having it use a wholly
separate (and by default transient) directory for that mode.</p></li>
<li><p>Fixed bug where changes to a &quot;<b class="file">.critcl</b>&quot; file did not result
in a rebuild for mode &quot;compile &amp; run&quot;. All relevant API commands now
ensure UUID changes.</p></li>
<li><p>Fixed bug in the backend handling of <b class="cmd">critcl::debug</b> where
the companion c-sources of a &quot;<b class="file">.critcl</b>&quot; file were not compiled
with debug options, although the &quot;<b class="file">.critcl</b>&quot; file was.</p></li>
<li><p>Fixed bug in <b class="cmd">critcl::debug</b> which prevented recognition of
mode &quot;all&quot; when it was not the first argument to the command.</p></li>
<li><p>Fixed bug in &quot;<b class="file">preload.c</b>&quot; preventing its compilation on
non-windows platforms.</p></li>
<li><p>Fixed long-standing bug in the handling of namespace qualifiers
in the command name argument of <b class="cmd">critcl::cproc</b> and
<b class="cmd">critcl::ccommand</b>. It is now possible to specify a fully
qualified command name without issues.</p></li>
<li><p>Extended/reworked <b class="cmd">critcl::tsources</b> to be the canonical
way of declaring &quot;<b class="file">.tcl</b>&quot; companion files even for mode &quot;compile &amp;
run&quot;.</p></li>
<li><p>Extended/reworked <b class="cmd">critcl::tsources</b> to allow the use of a
&quot;<b class="file">.critcl</b>&quot; file as its own Tcl companion file.</p></li>
<li><p>Extended <b class="cmd">critcl::framework</b> to internally check for OS X
build target, and to ignore the declaration if its not.</p></li>
<li><p>Extended <b class="cmd">critcl::failed</b> to be callable more than once in
a &quot;<b class="file">.critcl</b>&quot; file. The first call forces the build, if it was not
done already, to get the result. Further calls return the cached
result of the first call.</p></li>
<li><p>Extended the handling of environment variable CC in the code
determining the compiler to use to deal with (i.e. remove) paths to
the compiler, compiler file extensions, and compiler options specified
after the compiler itself, leaving only the bare name of the compiler.</p></li>
<li><p>Extended the code handling the search for preloaded libraries
to print the paths it searched, making debugging of a search failure
easier.</p></li>
<li><p>A new command <b class="cmd">critcl::tcl</b> can be used to declare the
version of Tcl minimally needed to build and run the &quot;<b class="file">.critcl</b>&quot;
file and package. Defaults to 8.4 if not declared. Extended critcl to
have the stubs and headers for all of Tcl 8.4, 8.5, and 8.6.</p></li>
<li><p>A new command <b class="cmd">critcl::load</b> forces the build and load of a
&quot;<b class="file">.critcl</b>&quot; file. This is the official way for overriding critcl's
default lazy-build-&amp;-load-on-demand scheme for mode &quot;compile &amp; run&quot;.</p>
<p><em>Note</em> that after using <b class="cmd">critcl::load</b> /
<b class="cmd">critcl::failed</b> in a &quot;<b class="file">.critcl</b>&quot; file it is not possible to
use critcl commands in that file anymore. Doing so will throw an
error.</p></li>
<li><p>Extended the generation of '#line' pragmas to use
<b class="cmd">info frame</b> (if available) to provide the C compiler with exact
line numbers into the &quot;<b class="file">.critcl</b>&quot; file for the reporting of
warnings and errors.</p></li>
<li><p>Extended <b class="cmd">critcl::check</b> with logging to help with
debugging build-time checks of the environment, plus an additional
optional argument to provide labeling.</p></li>
<li><p>Added a new command <b class="cmd">critcl::checklink</b> which not only
tries to check the environment via compiling the code, but also
its linkability.</p></li>
<li><p>Added a new command <b class="cmd">critcl::msg</b> for messaging, like
command <b class="cmd">critcl::error</b> is for error reporting. Likewise this is a
hook a user of the package is allowed to override. The default
implementation, used by mode <i class="term"><a href="../index.html#compile_run">compile &amp; run</a></i> does nothing. The
implementation for mode <i class="term"><a href="../index.html#generate_package">generate package</a></i> prints the message
to stdout.</p>
<p>Envisioned use is for the reporting of results determined by
<b class="cmd">critcl::check</b> and <b class="cmd">critcl::checklink</b> during building, to
help with debugging when something goes wrong with a check.</p></li>
<li><p>Exposed the argument processing internals of <b class="cmd">critcl::proc</b>
for use by advanced users. The new commands are</p>
<ol class="doctools_enumerated">
<li><p><b class="cmd">critcl::argnames</b></p></li>
<li><p><b class="cmd">critcl::argcnames</b></p></li>
<li><p><b class="cmd">critcl::argcsignature</b></p></li>
<li><p><b class="cmd">critcl::argvardecls</b></p></li>
<li><p><b class="cmd">critcl::argconversion</b></p></li>
</ol>
<p>Please see section <em>Advanced Embedded C Code</em> of the
<b class="package"><a href="critcl.html">critcl</a></b> package documentation for details.</p></li>
<li><p>Extended the critcl package to intercept <b class="cmd">package
provide</b> and record the file -&gt; package name mapping. Plus other
internal changes now allow the use of namespaced package names while
still using proper path names and init function.</p></li>
<li><p>Dropped the unused commands <b class="cmd">critcl::optimize</b> and
<b class="cmd">critcl::include</b>.</p></li>
<li><p>Dropped <b class="option">-lib</b> mode from the critcl application.</p></li>
<li><p>Dropped remnants of support for Tcl 8.3 and before.</p></li>
</ol>
</div>
<div id="section34" class="doctools_section"><h2><a name="section34">Authors</a></h2>
<p>Jean Claude Wippler, Steve Landers, Andreas Kupries</p>
</div>
<div id="section35" class="doctools_section"><h2><a name="section35">Bugs, Ideas, Feedback</a></h2>
<p>This document, and the package it describes, will undoubtedly contain
bugs and other problems.
Please report them at <a href="https://github.com/andreas-kupries/critcl/issues">https://github.com/andreas-kupries/critcl/issues</a>.
Ideas for enhancements you may have for either package, application,
and/or the documentation are also very welcome and should be reported
at <a href="https://github.com/andreas-kupries/critcl/issues">https://github.com/andreas-kupries/critcl/issues</a> as well.</p>
</div>
<div id="keywords" class="doctools_section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../index.html#c_code">C code</a>, <a href="../index.html#embedded_c_code">Embedded C Code</a>, <a href="../index.html#calling_c_code_from_tcl">calling C code from Tcl</a>, <a href="../index.html#code_generator">code generator</a>, <a href="../index.html#compile_run">compile &amp; run</a>, <a href="../index.html#compiler">compiler</a>, <a href="../index.html#dynamic_code_generation">dynamic code generation</a>, <a href="../index.html#dynamic_compilation">dynamic compilation</a>, <a href="../index.html#generate_package">generate package</a>, <a href="../index.html#linker">linker</a>, <a href="../index.html#on_demand_compilation">on demand compilation</a>, <a href="../index.html#on_the_fly_compilation">on-the-fly compilation</a></p>
</div>
<div id="category" class="doctools_section"><h2><a name="category">Category</a></h2>
<p>Glueing/Embedded C code</p>
</div>
<div id="copyright" class="doctools_section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; Jean-Claude Wippler<br>
Copyright &copy; Steve Landers<br>
Copyright &copy; 2011-2024 Andreas Kupries</p>
</div>
</div></body></html>
